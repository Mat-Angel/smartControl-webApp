<div class="flex justify-center pb-15 sm:pb-0">
  <div class="container rounded-box shadow-md bg-white my-5 pb-10">

    <h1 class="text-3xl font-bold mt-5 ml-5">Mis tarjetas</h1>
    <div class="divider"></div>


    <div class="grid grid-cols-1 lg:grid-cols-10">
      <div class="col-span-3 mx-5 ">
        <cards-list [cardsData]="cardsResource.value() ?? []"
                    [errorMessage]="cardsResource.error()"
                    [isEmpty]="!cardsResource.value()"
                    [isLoading]="cardsResource.isLoading()"
                    (selectedCard)="cardInfo.set($event); goToSection()"
         />
      </div>

      @if (cardInfo()!) {
        <div class="flex flex-col items-center col-span-7 mx-5 transition-all duration-300 animate-fadeIn">
          <div #card3D class="hover-3d my-12 cursor-pointer">
            <!-- content -->
            <div class="card w-100 h-60 text-white text-shadow-md text-shadow-black brightness-95 saturate-75 bg-[radial-gradient(circle_at_bottom_left,#ffffff04_35%,transparent_36%),radial-gradient(circle_at_top_right,#ffffff04_35%,transparent_36%)] bg-size-[4.95em_4.95em]" [style.background-color]="cardInfo()!.accSettings.color">
              <div class="card-body">
                <div class="flex justify-between mb-8">
                  <div class="font-bold">{{cardInfo()!.accInfo.bankName}} - {{cardInfo()!.accInfo.productName}}</div>
                  <div class=" flex flex-col justify-end items-center">
                    <span class="text-5xl w-10">
                      <img [src]="srcMatIcon" alt="icon"/>
                    </span>
                    <span class="capitalize">{{formUtils.paymentTypeTranslations[cardInfo()!.accInfo.paymentType]}}</span>
                  </div>
                </div>
                <div class="text-yellow-500 fixed inset-0 top-20 left-10 w-12">
                  <span [innerHTML]="iconsService.getSvgIcon('CHIP')"></span>
                </div>
                <div class="text-lg mt-5">{{cardInfo()!.accInfo.titularName ? cardInfo()!.accInfo.titularName : '0000 0000 0000 0000'}}</div>
                <div class="flex justify-between">
                  <div>
                    <div class="text-xs">{{cardInfo()?.accInfo?.paymentType === 'credit' ? 'Línea de crédito' : 'Saldo Disponible'}}</div>
                    <div>{{(cardInfo()?.accInfo?.paymentType === 'credit' ? cardInfo()!.balanceInfo.creditLine : cardInfo()!.balanceInfo.balance)
                         | currency:'MXN' : "symbol-narrow" : "1.2-2"}}
                    </div>
                  </div>
                  <div>
                    <div class="text-xs">Dia de corte</div>
                    <div>{{cardInfo()!.balanceInfo.cutoffDay}}</div>
                  </div>
                </div>
              </div>
            </div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>


          @if(cardInfo()?.accInfo?.paymentType === 'credit'){
           <div class="stats shadow w-full">
             <div class="stat">
               <div class="stat-figure text-secondary">
                 <span class="inline-block h-8 w-8 stroke-current" [innerHTML]="iconsService.getSvgIcon('INFO')"></span>
               </div>
               <div class="stat-title">Saldo Actual</div>
               <div class="stat-value">{{cardInfo()!.balanceInfo.balance | currency:'MXN' : "symbol-narrow" : "1.2-2"}}</div>
               <div class="stat-desc">Jan 1st - Feb 1st</div>
             </div>

             <div class="stat">
               <div class="stat-figure text-secondary w-10">
                 <span [innerHTML]="iconsService.getSvgIcon('CUTOFF_DATE')"></span>
                </div>
                <div class="stat-title">Fecha de corte (Aprox.)</div>
                <div class="stat-value">{{getCutoffDate(+cardInfo()!.balanceInfo.cutoffDay)}}</div>
                <div class="stat-desc">↗︎ 400 (22%)</div>
              </div>

              <div class="stat">
                <div class="stat-figure text-secondary w-10">
                  <span [innerHTML]="iconsService.getSvgIcon('PAYMENT_DATE')"></span>
                </div>
               <div class="stat-title">Fecha de pago (Aprox.)</div>
               <div class="stat-value">{{getPaymentDate(+cardInfo()!.balanceInfo.cutoffDay, +cardInfo()!.balanceInfo.daysToPay)}}</div>
               <div class="stat-desc">↘︎ 90 (14%)</div>
             </div>
           </div>
          }

        </div>
      }
    </div>
  </div>
</div>

<router-outlet></router-outlet>
